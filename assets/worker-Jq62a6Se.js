(function(){"use strict";const k="linear",B="linear",w="random",Y="backInOut",X=`WIX ðŸ¤ 
Particles!`,h="#ffffff",q=["#ff0000","#00ff00","#0000ff"],H={fontFamily:"Arial",fontSize:64,italic:!1,weight:600},W=500,Q=300,Z=100,V=0,x=500,b={particleRadius:5,startPosition:w,selectedMovementFunction:Y,text:X,textColor:"#FFFFFF",font:H,particleColors:q,animationDuration:3e3,particleSpread:3,startParticleOpacity:1,endParticleOpacity:1,startParticleSize:5,endParticleSize:1,particleSizeEasing:k,particleOpacityEasing:B,delay:0,emitterX:W,emitterY:Q,emitterSize:Z,emitterAngle:V,enableRevealAnimation:!1,revealDirection:0,turbulence:.8,windSpeed:1,windDirection:0,maxEffectParticleLifetime:1e3,minEffectParticles:3,maxEffectParticles:5};var T=(a=>(a.INITIALIZE="INITIALIZE",a.PLAY="PLAY",a.RESET="RESET",a.UPDATE_APP_PROPS="UPDATE_APP_PROPS",a.UPDATE_BITMAP="UPDATE_BITMAP",a.RESIZE_PARTICLE_RADIUS="RESIZE_PARTICLE_RADIUS",a.UPDATE_START_POSITION="UPDATE_START_POSITION",a.UPDATE_SELECTED_MOVEMENT_FUNCTION="UPDATE_SELECTED_MOVEMENT_FUNCTION",a.UPDATE_TEXT="UPDATE_TEXT",a.UPDATE_FONT="UPDATE_FONT",a.UPDATE_PARTICLE_COLORS="UPDATE_PARTICLE_COLORS",a.UPDATE_ANIMATION_DURATION="UPDATE_ANIMATION_DURATION",a.UPDATE_PARTICLE_SPREAD="UPDATE_PARTICLE_SPREAD",a.UPDATE_START_PARTICLE_OPACITY="UPDATE_START_PARTICLE_OPACITY",a.UPDATE_END_PARTICLE_OPACITY="UPDATE_END_PARTICLE_OPACITY",a.UPDATE_START_PARTICLE_SIZE="UPDATE_START_PARTICLE_SIZE",a.UPDATE_END_PARTICLE_SIZE="UPDATE_END_PARTICLE_SIZE",a.UPDATE_DELAY="UPDATE_DELAY",a.UPDATE_REVEAL_ANIMATION="UPDATE_REVEAL_ANIMATION",a.UPDATE_REVEAL_DIRECTION="UPDATE_REVEAL_DIRECTION",a))(T||{}),A=(a=>(a.INITIALIZED="INITIALIZED",a.UPDATE_APP_PROPS="UPDATE_APP_PROPS",a.ANIMATION_COMPLETE="ANIMATION_COMPLETE",a))(A||{});const z=a=>a,j=a=>1-Math.cos(a*Math.PI/2),G=a=>Math.sin(a*Math.PI/2),J=a=>-(Math.cos(Math.PI*a)-1)/2,$=a=>a**2,K=a=>1-(1-a)**2,tt=a=>a<.5?2*a**2:1-(-2*a+2)**2/2,at=a=>a**3,et=a=>1-(1-a)**3,nt=a=>a<.5?4*a**3:1-(-2*a+2)**3/2,rt=a=>a**4,ot=a=>1-(1-a)**4,it=a=>a<.5?8*a**4:1-(-2*a+2)**4/2,st=a=>a**5,ct=a=>1-(1-a)**5,lt=a=>a<.5?16*a**5:1-(-2*a+2)**5/2,pt=a=>a===0?0:2**(10*a-10),mt=a=>a===1?1:1-2**(-10*a),dt=a=>a===0?0:a===1?1:a<.5?2**(20*a-10)/2:(2-2**(-20*a+10))/2,ut=a=>1-Math.sqrt(1-a**2),Pt=a=>Math.sqrt(1-(a-1)**2),Et=a=>a<.5?(1-Math.sqrt(1-4*a**2))/2:(Math.sqrt(-(2*a-3)*(2*a-1))+1)/2,It=a=>2.70158*a**3-1.70158*a**2,ft=a=>1+2.70158*(a-1)**3+1.70158*(a-1)**2,Tt=(a,e=1.70158*1.525)=>a<.5?(2*a)**2*((e+1)*2*a-e)/2:((2*a-2)**2*((e+1)*(a*2-2)+e)+2)/2,d=a=>({targetCoordinates:e,initialCoordinates:n,progress:o})=>{const i=(r,p,m)=>r+m*(p-r),c=a(o),l=i(n.x,e.x,c),s=i(n.y,e.y,c);return Math.abs(l-e.x)<1&&Math.abs(s-e.y)<1?{x:e.x,y:e.y}:{x:l,y:s}},ht={backInOut:{name:"backInOut",displayName:"Back In Out",function:d(Tt),description:"Back easing with overshoot"},linear:{name:"linear",displayName:"Linear",function:d(z),description:"Constant speed movement"},sineIn:{name:"sineIn",displayName:"Sine In",function:d(j),description:"Slow start, accelerating"},sineOut:{name:"sineOut",displayName:"Sine Out",function:d(G),description:"Fast start, decelerating"},sineInOut:{name:"sineInOut",displayName:"Sine In Out",function:d(J),description:"Slow start and end"},quadIn:{name:"quadIn",displayName:"Quad In",function:d($),description:"Quadratic acceleration"},quadOut:{name:"quadOut",displayName:"Quad Out",function:d(K),description:"Quadratic deceleration"},quadInOut:{name:"quadInOut",displayName:"Quad In Out",function:d(tt),description:"Quadratic acceleration and deceleration"},cubicIn:{name:"cubicIn",displayName:"Cubic In",function:d(at),description:"Cubic acceleration"},cubicOut:{name:"cubicOut",displayName:"Cubic Out",function:d(et),description:"Cubic deceleration"},cubicInOut:{name:"cubicInOut",displayName:"Cubic In Out",function:d(nt),description:"Cubic acceleration and deceleration"},quartIn:{name:"quartIn",displayName:"Quart In",function:d(rt),description:"Quartic acceleration"},quartOut:{name:"quartOut",displayName:"Quart Out",function:d(ot),description:"Quartic deceleration"},quartInOut:{name:"quartInOut",displayName:"Quart In Out",function:d(it),description:"Quartic acceleration and deceleration"},quintIn:{name:"quintIn",displayName:"Quint In",function:d(st),description:"Quintic acceleration"},quintOut:{name:"quintOut",displayName:"Quint Out",function:d(ct),description:"Quintic deceleration"},quintInOut:{name:"quintInOut",displayName:"Quint In Out",function:d(lt),description:"Quintic acceleration and deceleration"},expoIn:{name:"expoIn",displayName:"Expo In",function:d(pt),description:"Exponential acceleration"},expoOut:{name:"expoOut",displayName:"Expo Out",function:d(mt),description:"Exponential deceleration"},expoInOut:{name:"expoInOut",displayName:"Expo In Out",function:d(dt),description:"Exponential acceleration and deceleration"},circIn:{name:"circIn",displayName:"Circ In",function:d(ut),description:"Circular acceleration"},circOut:{name:"circOut",displayName:"Circ Out",function:d(Pt),description:"Circular deceleration"},circInOut:{name:"circInOut",displayName:"Circ In Out",function:d(Et),description:"Circular acceleration and deceleration"},backIn:{name:"backIn",displayName:"Back In",function:d(It),description:"Back with overshoot at start"},backOut:{name:"backOut",displayName:"Back Out",function:d(ft),description:"Back with overshoot at end"}},At=a=>{var e;return((e=ht[a])==null?void 0:e.function)||null},C=(a,e)=>{const{width:o,height:i,data:c}=a,l=Math.ceil(o/e),s=Math.ceil(i/e),r=new Uint8Array(Math.ceil(o/e)*Math.ceil(i/e));let p=0;for(let m=0;m<i;m+=e)for(let u=0;u<o;u+=e){let P=!1;for(let I=0;I<e&&!P;I++)for(let E=0;E<e&&!P;E++){const f=u+E,g=m+I;if(f<o&&g<i){const y=(g*o+f)*4;c[y+3]>10&&(P=!0)}}r[p++]=P?1:0}return{validBlocks:r,blockWidth:l,blockHeight:s}},M=(a,e,n)=>a+n*(e-a),_t=a=>{a=a.replace(/^#/,"");const e=parseInt(a,16),n=e>>16&255,o=e>>8&255,i=e&255;return{r:n,g:o,b:i}},gt=a=>{const e=a.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!e)return console.warn("Invalid HSL color format:",a),{r:0,g:0,b:0};const n=parseInt(e[1])/360,o=parseInt(e[2])/100,i=parseInt(e[3])/100,c=(p,m,u)=>(u<0&&(u+=1),u>1&&(u-=1),u<1/6?p+(m-p)*6*u:u<1/2?m:u<2/3?p+(m-p)*(2/3-u)*6:p);let l,s,r;if(o===0)l=s=r=i;else{const p=i<.5?i*(1+o):i+o-i*o,m=2*i-p;l=c(m,p,n+1/3),s=c(m,p,n),r=c(m,p,n-1/3)}return{r:Math.round(l*255),g:Math.round(s*255),b:Math.round(r*255)}},v=a=>{if(!a||typeof a!="string")throw new Error(`Invalid color string provided to parseColor: ${JSON.stringify(a)}`);return a.startsWith("hsl(")?gt(a):_t(a)},Ct=(a,e,n)=>"#"+((1<<24)+(a<<16)+(e<<8)+n).toString(16).slice(1),F=(a,e)=>{if(!(a!=null&&a.length))return"#ffffff";const n=a.filter(P=>P&&typeof P=="string");if(!n.length)throw new Error(`Invalid colors provided to getColorFromProgress: ${JSON.stringify(a)}`);if(n.length===1)return n[0];const i=Math.max(0,Math.min(1,e))*(n.length-1),c=Math.floor(i);if(c===n.length-1)return n[n.length-1];const l=i-c,s=v(n[c]),r=v(n[c+1]),p=Math.round(M(s.r,r.r,l)),m=Math.round(M(s.g,r.g,l)),u=Math.round(M(s.b,r.b,l));return Ct(p,m,u)},O=({dimensions:{width:a,height:e},emitterX:n=a/2,emitterY:o=e/2,emitterSize:i=100,emitterAngle:c=0})=>({top:()=>({x:Math.random()*a,y:0}),center:()=>({x:Math.round(a/2),y:Math.round(e/2)}),bottom:()=>({x:Math.random()*a,y:e}),random:()=>({x:Math.random()*a,y:Math.random()*e}),left:()=>({x:0,y:Math.random()*e}),right:()=>({x:a,y:Math.random()*e}),"top-left":()=>({x:Math.random()*(a/5),y:Math.random()*(e/5)}),"top-right":()=>({x:a,y:Math.random()*(e/5)}),"bottom-left":()=>({x:Math.random()*(a/5),y:e-Math.random()*(e/5)}),"bottom-right":()=>({x:a-Math.random()*(a/5),y:e-Math.random()*(e/5)}),canvasEdges:()=>{const s=Math.floor(Math.random()*4);return s===0?{x:Math.random()*a,y:0}:s===1?{x:Math.random()*a,y:e}:s===2?{x:0,y:Math.random()*e}:{x:a,y:Math.random()*e}},topLeft:()=>({x:0,y:0}),emitterPoint:()=>({x:n,y:o}),emitterCircle:()=>{const s=Math.random()*2*Math.PI,r=Math.random()*i;return{x:n+r*Math.cos(s),y:o+r*Math.sin(s)}},emitterSquare:()=>({x:n+(Math.random()-.5)*i,y:o+(Math.random()-.5)*i}),emitterHLine:()=>{const s=c*(Math.PI/180),r=(Math.random()-.5)*i;return{x:n+r*Math.cos(s),y:o+r*Math.sin(s)}},emitterVLine:()=>{const s=(c+90)*(Math.PI/180),r=(Math.random()-.5)*i;return{x:n+r*Math.cos(s),y:o+r*Math.sin(s)}},enterTopTextWidth:()=>({x:a*.2+Math.random()*a*.6,y:e*.3}),enterBottomTextWidth:()=>({x:a*.2+Math.random()*a*.6,y:e*.7}),enterLeftTextHeight:()=>({x:a*.2,y:e*.3+Math.random()*e*.4}),enterRightTextHeight:()=>({x:a*.8,y:e*.3+Math.random()*e*.4})}),t={workerParticles:[],imageBitmap:null,animationFrameId:0,frameCanvas:null,frameContext:null,mainCanvas:null,mainContext:null,validBlocks:null,blockHeight:0,blockWidth:0,appProps:b,revealProgress:0,effectParticles:[]};let _;const Mt=async a=>{t.mainCanvas=a,t.mainContext=t.mainCanvas.getContext("bitmaprenderer"),t.frameCanvas=new OffscreenCanvas(t.mainCanvas.width,t.mainCanvas.height),t.frameContext=t.frameCanvas.getContext("2d",{willReadFrequently:!0})},Ot=a=>{const{imageBitmap:e,canvas:n,dimensions:o,appProps:i}=a;t.imageBitmap=e,Object.keys(i).length&&(t.appProps={...b,...i}),Mt(n),t.frameContext.drawImage(t.imageBitmap,0,0);const{validBlocks:c,blockHeight:l,blockWidth:s}=C(t.frameContext.getImageData(0,0,t.mainCanvas.width,t.mainCanvas.height),t.appProps.particleRadius);t.validBlocks=c,t.blockHeight=l,t.blockWidth=s,_=O({dimensions:o,emitterX:t.appProps.emitterX,emitterY:t.appProps.emitterY,emitterSize:t.appProps.emitterSize,emitterAngle:t.appProps.emitterAngle}),t.workerParticles=D({validBlocks:t.validBlocks,radius:t.appProps.particleRadius,blockHeight:t.blockHeight,blockWidth:t.blockWidth,startPosition:t.appProps.startPosition,delay:t.appProps.delay,animationDuration:t.appProps.animationDuration,revealAnimation:t.appProps.enableRevealAnimation}),self.postMessage({type:A.INITIALIZED,data:t.appProps})},D=({validBlocks:a,radius:e,blockHeight:n,blockWidth:o,startPosition:i,delay:c,animationDuration:l,revealAnimation:s})=>{const r=[];for(let p=0;p<n;p++)for(let m=0;m<o;m++){const u=p*o+m;if(a[u]){const P=m*e,I=p*e,{x:E,y:f}=s?{x:P,y:I}:_[i](),g=s?0:Math.random()*c,y=l-g;r.push({targetX:P,targetY:I,x:E,y:f,initialX:E,initialY:f,scale:1,opacity:1,color:h,revealProgress:0,revealThreshold:.97+Math.random()*.02,reachedTarget:!1,emittedBubbles:!1,delay:g,lifetime:y,radius:e})}}return r},Dt=a=>{if(a.length===0)return{width:0,height:0,minX:0,minY:0,maxX:0,maxY:0};let e=1/0,n=1/0,o=-1/0,i=-1/0;return a.forEach(c=>{e=Math.min(e,c.targetX),n=Math.min(n,c.targetY),o=Math.max(o,c.targetX+t.appProps.particleRadius),i=Math.max(i,c.targetY+t.appProps.particleRadius)}),{minX:e,minY:n,maxX:o,maxY:i,width:o-e,height:i-n}},Rt=(a,e,n,o)=>{const i=n*Math.PI/180,c=o.minX+o.width/2,l=o.minY+o.height/2,s=a.targetX+t.appProps.particleRadius/2,r=a.targetY+t.appProps.particleRadius/2,p=s-c,m=r-l,u=p*Math.cos(i)+m*Math.sin(i),P=Math.max(Math.abs(o.width/2*Math.cos(i))+Math.abs(o.height/2*Math.sin(i)),Math.abs(o.width/2*Math.cos(i))-Math.abs(o.height/2*Math.sin(i))),I=-P+e*2*P;return u<=I},Lt=(a,e)=>{if(e>(a.revealThreshold||.99))return 1;if(e>.85&&Math.sqrt(Math.pow(a.x-a.targetX,2)+Math.pow(a.y-a.targetY,2))<=5){const i=(a.revealThreshold||.99)-.02,c=Math.max(0,(e-i)/.02);return Math.min(1,c)}return 0},N=a=>{const e=t.appProps.startParticleOpacity,n=t.appProps.endParticleOpacity,o=yt(a,t.appProps.particleOpacityEasing);if(t.appProps.particleOpacityEasing!=="linear"){const i=Math.min(e,n),c=Math.max(e,n);return i+(c-i)*o}return e+(n-e)*o},yt=(a,e)=>{switch(e){case"bell":return Math.sin(a*Math.PI);case"linear":return a;case"multiPulse":const o=a*5%1;return Math.sin(o*Math.PI);default:return 1}},xt=(a,e)=>{switch(e){case"bell":return Math.sin(a*Math.PI);case"linear":return a;case"multiPulse":const o=a*5%1;return Math.sin(o*Math.PI);default:return 1}},U=a=>{const e=t.appProps.startParticleSize,n=t.appProps.endParticleSize,o=xt(a,t.appProps.particleSizeEasing);if(t.appProps.particleSizeEasing!=="linear"){const i=Math.min(e,n),c=Math.max(e,n);return i+(c-i)*o}return e+(n-e)*o},R=(a,e,n=!0)=>{const o=N(e),i=U(e),c=a.radius*i;let l;try{l=t.appProps.particleColors.length?F(t.appProps.particleColors,e):a.color,(!l||typeof l!="string")&&(l=h)}catch(p){console.warn("Error getting particle color:",p),l=h}const s=n?Math.floor(a.x)+c/2:Math.floor(a.x),r=n?Math.floor(a.y)+c/2:Math.floor(a.y);t.frameContext.globalAlpha=o,t.frameContext.beginPath(),t.frameContext.arc(s,r,c/2,0,2*Math.PI),t.frameContext.fillStyle=l,t.frameContext.fill()},bt=(a,e)=>{const n=[],o=t.appProps.maxEffectParticles-t.appProps.minEffectParticles,i=t.appProps.minEffectParticles+Math.floor(Math.random()*(o+1)),c=0;for(let l=0;l<i;l++){const s=t.appProps.windDirection*Math.PI/180,r=t.appProps.windSpeed*(.5+Math.random()*1),p=Math.cos(s)*r,m=Math.sin(s)*r,u=t.appProps.turbulence,P=p+(Math.random()-.5)*u,I=m+(Math.random()-.5)*u;n.push({x:a.x+t.appProps.particleRadius/2,y:a.y+t.appProps.particleRadius/2,vx:P,vy:I,startTime:e,lifetime:x+Math.random()*(t.appProps.maxEffectParticleLifetime-x),radius:t.appProps.particleRadius,opacity:1,progress:c,color:(()=>{try{return t.appProps.particleColors.length?F(t.appProps.particleColors,c):h}catch(E){return console.warn("Error getting effect particle color:",E),h}})()})}return n},S=(a,e,n)=>{t.frameContext.clearRect(0,0,t.frameCanvas.width,t.frameCanvas.height);const o=e-a,i=t.appProps.animationDuration-t.appProps.maxEffectParticleLifetime;t.revealProgress=Math.min(1,o/t.appProps.animationDuration);const c=Math.min(1,o/i);t.frameContext.globalAlpha=1,t.workerParticles.forEach((s,r)=>{if(Rt(s,c,t.appProps.revealDirection,n)){if(!s.emittedBubbles&&(s.emittedBubbles=!0,r%2===0)){const m=bt(s,e);t.effectParticles.push(...m)}t.frameContext.drawImage(t.imageBitmap,s.targetX,s.targetY,t.appProps.particleRadius,t.appProps.particleRadius,Math.floor(s.x),Math.floor(s.y),t.appProps.particleRadius,t.appProps.particleRadius)}});for(let s=t.effectParticles.length-1;s>=0;s--){const r=t.effectParticles[s],p=e-r.startTime;if(r.progress=Math.min(1,p/r.lifetime),r.progress>=1){t.effectParticles.splice(s,1);continue}r.x+=r.vx,r.y+=r.vy,r.vx*=.99,r.vy*=.99,R(r,r.progress,!1)}t.frameContext.globalAlpha=1;const l=t.frameCanvas.transferToImageBitmap();if(t.mainContext.transferFromImageBitmap(l),t.revealProgress<1)t.animationFrameId=requestAnimationFrame(s=>S(a,s,n));else{t.frameContext.drawImage(t.imageBitmap,0,0);const s=t.frameCanvas.transferToImageBitmap();t.mainContext.transferFromImageBitmap(s),t.effectParticles=[],t.workerParticles.forEach(r=>{r.emittedBubbles=!1}),self.postMessage({type:A.ANIMATION_COMPLETE})}},L=(a,e)=>{let n=!0;t.frameContext.clearRect(0,0,t.frameCanvas.width,t.frameCanvas.height);const o=e-a;t.revealProgress=Math.min(1,o/t.appProps.animationDuration),t.frameContext.globalAlpha=1,t.workerParticles.forEach(r=>{if(r.delay>e-a)return;const p=o-r.delay,m=Math.max(0,Math.min(1,p/r.lifetime)),u=At(t.appProps.selectedMovementFunction);if(u){const f=u({targetCoordinates:{x:r.targetX,y:r.targetY},initialCoordinates:{x:r.initialX,y:r.initialY},progress:t.revealProgress});r.x=f.x,r.y=f.y}const P=Lt(r,t.revealProgress),I=N(m),E=U(m);P>0&&P<1?(R(r,m,!0),t.frameContext.globalAlpha=P*I,t.frameContext.drawImage(t.imageBitmap,r.targetX,r.targetY,E,E,Math.floor(r.x),Math.floor(r.y),E,E)):P>=1?(t.frameContext.globalAlpha=1,t.frameContext.drawImage(t.imageBitmap,r.targetX,r.targetY,t.appProps.particleRadius,t.appProps.particleRadius,Math.floor(r.x),Math.floor(r.y),t.appProps.particleRadius,t.appProps.particleRadius)):R(r,m,!0),(r.x!==r.targetX||r.y!==r.targetY||t.revealProgress<.99)&&(n=!1)});const i=t.frameCanvas.transferToImageBitmap();t.mainContext.transferFromImageBitmap(i);const c=n&&t.revealProgress>=1,l=t.appProps.animationDuration;c&&o>=l?t.animationFrameId&&(cancelAnimationFrame(t.animationFrameId),t.frameContext.drawImage(t.imageBitmap,0,0),self.postMessage({type:A.ANIMATION_COMPLETE})):t.animationFrameId=requestAnimationFrame(r=>L(a,r))},vt=()=>{t.animationFrameId&&cancelAnimationFrame(t.animationFrameId),t.effectParticles=[];const a=performance.now();if(t.revealProgress=0,t.appProps.enableRevealAnimation){const e=Dt(t.workerParticles);t.frameContext.globalAlpha=1,t.workerParticles.forEach(n=>{n.emittedBubbles=!1}),S(a,a,e)}else L(a,a)},Ft=()=>{t.animationFrameId&&cancelAnimationFrame(t.animationFrameId),t.effectParticles=[],t.workerParticles=t.workerParticles.map(e=>{const n=_[t.appProps.startPosition](),o=Math.random()*t.appProps.delay,i=t.appProps.animationDuration-o;return{x:n.x,y:n.y,initialX:n.x,initialY:n.y,targetX:e.targetX,targetY:e.targetY,scale:1,opacity:1,color:e.color,revealProgress:0,revealThreshold:e.revealThreshold,reachedTarget:!1,emittedBubbles:!1,delay:o,lifetime:i,radius:t.appProps.particleRadius}}),t.frameContext.clearRect(0,0,t.frameCanvas.width,t.frameCanvas.height);const a=t.frameCanvas.transferToImageBitmap();t.mainContext.transferFromImageBitmap(a),t.animationFrameId&&cancelAnimationFrame(t.animationFrameId)},Nt=a=>{if(t.imageBitmap=a,t.frameCanvas&&t.mainCanvas){t.frameCanvas.width=t.imageBitmap.width,t.frameCanvas.height=t.imageBitmap.height,t.mainCanvas.width=t.imageBitmap.width,t.mainCanvas.height=t.imageBitmap.height,t.frameContext.drawImage(t.imageBitmap,0,0);const{validBlocks:e,blockHeight:n,blockWidth:o}=C(t.frameContext.getImageData(0,0,t.mainCanvas.width,t.mainCanvas.height),t.appProps.particleRadius);t.validBlocks=e,t.blockHeight=n,t.blockWidth=o,_=O({dimensions:{width:t.mainCanvas.width,height:t.mainCanvas.height},emitterX:t.appProps.emitterX,emitterY:t.appProps.emitterY,emitterSize:t.appProps.emitterSize,emitterAngle:t.appProps.emitterAngle}),t.frameContext.clearRect(0,0,t.frameCanvas.width,t.frameCanvas.height);const i=t.frameCanvas.transferToImageBitmap();t.mainContext.transferFromImageBitmap(i),t.workerParticles=D({validBlocks:t.validBlocks,radius:t.appProps.particleRadius,blockHeight:t.blockHeight,blockWidth:t.blockWidth,startPosition:t.appProps.startPosition,delay:t.appProps.delay,animationDuration:t.appProps.animationDuration,revealAnimation:t.appProps.enableRevealAnimation})}},Ut=a=>{const{appProps:e,shouldUpdateStartCoordinatesConfig:n,shouldRegenerateImageBlocks:o}=a;if(Object.assign(t.appProps,e),o){t.frameContext.drawImage(t.imageBitmap,0,0);const{validBlocks:i,blockHeight:c,blockWidth:l}=C(t.frameContext.getImageData(0,0,t.mainCanvas.width,t.mainCanvas.height),t.appProps.particleRadius);t.validBlocks=i,t.blockHeight=c,t.blockWidth=l}if(n&&(_=O({dimensions:{width:t.mainCanvas.width,height:t.mainCanvas.height},emitterX:t.appProps.emitterX,emitterY:t.appProps.emitterY,emitterSize:t.appProps.emitterSize,emitterAngle:t.appProps.emitterAngle})),t.workerParticles=D({validBlocks:t.validBlocks??new Uint8Array,radius:t.appProps.particleRadius,blockHeight:t.blockHeight,blockWidth:t.blockWidth,startPosition:t.appProps.startPosition,delay:t.appProps.delay,animationDuration:t.appProps.animationDuration,revealAnimation:t.appProps.enableRevealAnimation}),self.postMessage({type:A.UPDATE_APP_PROPS,data:t.appProps}),t.animationFrameId){cancelAnimationFrame(t.animationFrameId);const i=performance.now();L(i,i)}};self.onmessage=a=>{const{payload:e,type:n}=a.data;switch(n){case T.INITIALIZE:{Ot(e);break}case T.PLAY:{vt();break}case T.RESET:{Ft();break}case T.UPDATE_APP_PROPS:{Ut(e);break}case T.UPDATE_BITMAP:{Nt(e);break}}}})();
